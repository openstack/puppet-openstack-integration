---
# This file contains the tripleo jobs for the puppet modules
#
- job:
    name: tripleo-puppet-ci-centos-8-undercloud-containers
    parent: tripleo-ci-centos-8-undercloud-containers
    irrelevant-files:
      - ^.*\.md$
      - ^.*\.rst$
      - ^doc/.*$
      - ^etc/.*$
      - ^metadata.json$
      - ^releasenotes/.*$
      - ^test-requirements.txt$
      - ^LICENSE$
      - ^.gitignore$
      - ^setup.cfg$
      - ^setup.py$

- project-template:
    name: tripleo-puppet-undercloud
    check:
      jobs:
        - tripleo-ci-centos-8-content-provider
        - tripleo-puppet-ci-centos-8-undercloud-containers: &consumer_job
            vars: &consumer_vars
              consumer_job: true
              build_container_images: false
              remove_tags:
                - build
            dependencies: &deps_cprovider
              - tripleo-ci-centos-8-content-provider
    gate:
      jobs:
        - tripleo-ci-centos-8-content-provider
        - tripleo-puppet-ci-centos-8-undercloud-containers: *consumer_job

- job:
    name: tripleo-puppet-ci-centos-8-standalone
    parent: tripleo-ci-centos-8-standalone
    irrelevant-files: &standalone_irrelevant_files
      - ^.*\.md$
      - ^.*\.rst$
      - ^doc/.*$
      - ^etc/.*$
      - ^metadata.json$
      - ^releasenotes/.*$
      - ^spec/.*$
      - ^test-requirements.txt$
      - ^LICENSE$
      - ^.gitignore$
      - ^setup.cfg$
      - ^setup.py$

- job:
    name: tripleo-puppet-ci-centos-8-standalone
    parent: tripleo-ci-centos-8-standalone
    irrelevant-files: *standalone_irrelevant_files

- project-template:
    name: tripleo-puppet-standalone
    check:
      jobs:
        - tripleo-ci-centos-8-content-provider
        - tripleo-puppet-ci-centos-8-standalone: *consumer_job
    gate:
      jobs:
        - tripleo-ci-centos-8-content-provider
        - tripleo-puppet-ci-centos-8-standalone: *consumer_job
