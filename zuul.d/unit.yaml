---
# This file contains the puppet unit job configurations
#
- job:
    name: puppet-openstack-unit-7.16-centos-9-stream
    parent: puppet-openstack-unit-base
    nodeset: centos-9-stream
    vars:
      puppet_gem_version: 7.16.0
      # NOTE(tkajinam): rspec-puppet >= 2.10.0 is required for Ruby 3 support
      rspec_puppet_version: '= 2.10.0'

- job:
    name: puppet-openstack-unit-6.21-ubuntu-focal
    parent: puppet-openstack-unit-base
    nodeset: ubuntu-focal
    vars:
      puppet_gem_version: 6.21.1
      rspec_puppet_version: '= 2.9.0'

- job:
    name: puppet-openstack-unit-7.16-ubuntu-focal
    parent: puppet-openstack-unit-base
    nodeset: ubuntu-focal
    vars:
      puppet_gem_version: 7.16.0
      rspec_puppet_version: '= 2.9.0'

- job:
    name: puppet-openstack-unit-latest-ubuntu-focal
    parent: puppet-openstack-unit-base
    nodeset: ubuntu-focal
    voting: false
    vars:
      puppet_gem_version: latest
      rspec_puppet_version: '= 2.9.0'

- project-template:
    name: puppet-openstack-module-unit-jobs
    check:
      jobs:
        - puppet-openstack-unit-7.16-centos-9-stream
        - puppet-openstack-unit-6.21-ubuntu-focal
        - puppet-openstack-unit-7.16-ubuntu-focal
        - puppet-openstack-unit-latest-ubuntu-focal
    gate:
      jobs:
        - puppet-openstack-unit-7.16-centos-9-stream
        - puppet-openstack-unit-6.21-ubuntu-focal
        - puppet-openstack-unit-7.16-ubuntu-focal
